@using Portfolio.Models
@{
    ViewData["Title"] = "Marketing Projeleri";

    var videoProjects = ViewData["Videos"] as List<Marketing>;
    var imageProjects = ViewData["Images"] as List<Marketing>;

    var gifProjects = imageProjects?.Where(p => p.ImagePath != null && p.ImagePath.EndsWith(".gif", StringComparison.OrdinalIgnoreCase)).ToList();
    var staticImageProjects = imageProjects?.Where(p => p.ImagePath != null && !p.ImagePath.EndsWith(".gif", StringComparison.OrdinalIgnoreCase)).ToList();
}

<style>
    /* ------------------------------------------------------------------- */
    /* Home sayfasındaki son estetik ve profesyonel stillerle tam uyum       */
    /* ------------------------------------------------------------------- */

    /* Ana Stil Tanımlamaları */
    :root {
        --main-color: #762251;
        --card-bg: #ffffff; /* Kartlar için saf beyaz */
        --text-color: #333;
        --secondary-text: #6c757d;
    }

    /* Tipografi ve Başlık Stilleri */
    h2, h3 {
        color: var(--main-color);
        font-weight: 700;
        position: relative;
        padding-bottom: 15px;
        margin-bottom: 40px;
        text-align: center;
        /* Inter fontu Layout'ta tanımlı, burada letter-spacing eklenebilir */
        letter-spacing: -0.5px;
    }

        h2::after, h3::after {
            content: "";
            width: 30px;
            height: 2px;
            background-color: var(--main-color);
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 1px;
        }

    /* 🔥 Kart Stili (Geliştirilmiş Gölge ve Hover) */
    .card {
        border: 1px solid rgba(0, 0, 0, 0.05);
        border-radius: 15px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08); /* Yumuşak gölge */
        height: 100%;
        overflow: hidden;
        background-color: var(--card-bg);
    }

        .card:hover {
            transform: translateY(-8px); /* Belirgin kalkış efekti */
            box-shadow: 0 15px 40px rgba(118, 34, 81, 0.35); /* Vurgulu gölge */
        }

    .card-img-top {
        border-radius: 15px 15px 0 0;
        object-fit: cover;
        height: 200px;
    }

    .card-body {
        padding: 1.5rem;
    }

    .card-title {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--main-color);
    }

    .card-text {
        font-size: 0.95rem;
        color: var(--secondary-text);
    }

    .image-card-link {
        cursor: zoom-in;
        display: block;
    }

    /* Görsel Sığdırma Stili */
    .modal-img {
        width: 100%;
        height: auto;
        border-radius: 8px;
        max-height: 80vh;
        object-fit: contain;
    }

    /* 🔥 SEKME OKUNABİLİRLİĞİ DÜZELTİLDİ */
    .nav-pills .nav-link.active {
        background-color: var(--main-color);
        font-weight: 600;
        color: #fff !important; /* AKTİF YAZIYI BEYAZ YAP */
    }

    .nav-pills .nav-link {
        color: var(--secondary-text);
        font-weight: 500;
        transition: all 0.3s;
    }

    .tab-nav-container {
        border-radius: 15px;
        background-color: var(--card-bg);
    }

    .lead {
        color: var(--secondary-text);
        font-size: 1.1rem;
    }
</style>

<div class="container py-5">

    <div class="text-center mb-5 pb-4">
        <h1 class="display-5 fw-bold" style="color: var(--text-color);">Dijital Hikayenizi Güçlendiren İçerikler</h1>
        <p class="lead mx-auto" style="max-width: 800px;">
            Hazırladığım her görsel, video ve GIF, belirli bir pazarlama hedefine ulaşmak için tasarlanmıştır. Bu bölümde, kullanıcı etkileşimini artırmak, marka bilinirliğini yükseltmek ve dönüşüm sağlamak amacıyla ürettiğim, analitik temelli içerik örneklerini görebilirsiniz.
        </p>
    </div>

    <ul class="nav nav-pills nav-fill mb-5 p-3 shadow tab-nav-container" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="pills-videos-tab" data-bs-toggle="pill" data-bs-target="#pills-videos" type="button" role="tab">Video Örnekleri</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-static-tab" data-bs-toggle="pill" data-bs-target="#pills-static" type="button" role="tab">Statik Görseller</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="pills-gif-tab" data-bs-toggle="pill" data-bs-target="#pills-gif" type="button" role="tab">Animasyonlu Görseller</button>
        </li>
    </ul>

    <div class="tab-content" id="pills-tabContent">

        <div class="tab-pane fade show active" id="pills-videos" role="tabpanel" aria-labelledby="pills-videos-tab">
            <h3 class="text-center mb-4">YouTube Shorts ve Video Kampanyaları</h3>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                @foreach (var project in videoProjects)
                {
                    <div class="col">
                        <div class="card shadow">
                            @if (project.VideoPath != null && project.VideoPath.Contains("youtube.com"))
                            {
                                <div class="ratio ratio-16x9">
                                    <iframe src="@project.VideoPath" title="@project.Title" allowfullscreen></iframe>
                                </div>
                            }
                            <div class="card-body">
                                <h5 class="card-title">@project.Title</h5>
                                <p class="card-text">@project.Description</p>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>

        <div class="tab-pane fade" id="pills-static" role="tabpanel" aria-labelledby="pills-static-tab">
            <h3 class="text-center mb-4">Afiş, İnfografik ve Uygulama Görselleri</h3>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                @foreach (var project in staticImageProjects)
                {
                    <div class="col">
                        <div class="card shadow">
                            <a href="#" class="image-card-link"
                               data-bs-toggle="modal"
                               data-bs-target="#imageModal"
                               data-image-path="@Url.Content("~/" + project.ImagePath)"
                               data-image-title="@project.Title">
                                <img src="~/@project.ImagePath" class="card-img-top" alt="@project.Title" />
                            </a>
                            <div class="card-body">
                                <h5 class="card-title">@project.Title</h5>
                                <p class="card-text">@project.Description</p>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>

        <div class="tab-pane fade" id="pills-gif" role="tabpanel" aria-labelledby="pills-gif-tab">
            <h3 class="text-center mb-4">Sosyal Medya ve Web Duyuruları İçin GIF'ler</h3>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                @foreach (var project in gifProjects)
                {
                    <div class="col">
                        <div class="card shadow">
                            <a href="#" class="image-card-link"
                               data-bs-toggle="modal"
                               data-bs-target="#imageModal"
                               data-bs-target="#imageModal"
                               data-image-path="@Url.Content("~/" + project.ImagePath)"
                               data-image-title="@project.Title">
                                <img src="~/@project.ImagePath" class="card-img-top" alt="@project.Title" />
                            </a>
                            <div class="card-body">
                                <h5 class="card-title">@project.Title</h5>
                                <p class="card-text">@project.Description</p>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>

    </div>
</div>

<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="imageModalLabel">Görsel Detayı</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <img id="fullImage" src="" alt="Tam Boyutlu Görsel" class="modal-img">
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        var imageModal = document.getElementById('imageModal');

        imageModal.addEventListener('show.bs.modal', function (event) {
            var link = event.relatedTarget;

            var imagePath = link.getAttribute('data-image-path');
            var imageTitle = link.getAttribute('data-image-title');

            var modalTitle = imageModal.querySelector('.modal-title');
            var modalImage = imageModal.querySelector('#fullImage');

            modalTitle.textContent = imageTitle;
            modalImage.src = imagePath;
        });
    </script>
}